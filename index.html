<!DOCTYPE html>
<html lang="gl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Elevación - Camiñando Xuntos</title>
    <!-- Cargamos Tailwind primeiro -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Dependencias de React e Recharts na orde correcta -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    <!-- Outras utilidades -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Crimson+Pro:wght@700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-serif { font-family: 'Crimson Pro', serif; }
    </style>
</head>
<body class="bg-[#FDFBF7]">
    <div id="root"></div>

    <script type="text/babel">
        // Accedemos a Recharts dende o obxecto global window tras a carga do UMD
        const { 
            AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, 
            ResponsiveContainer, ReferenceLine, Label 
        } = window.Recharts;
        const { 
            Mountain, Info, ChevronRight, ChevronLeft, Navigation, 
            Ship, Share2, MapPin, Footprints, Bed, Award 
        } = lucide;

        const App = () => {
            const [activeStage, setActiveStage] = React.useState(0);
            const [copied, setCopied] = React.useState(false);

            const shareUrl = "www.caminandojuntos.com.mx/perfil-elevacion-camino-portugues-espiritual";

            const handleShare = () => {
                const el = document.createElement('textarea');
                el.value = shareUrl;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            // Datos de elevación (Etapas en Galego)
            const data = [
                { km: 0, alt: 35, name: 'Tui', stage: 'E1' },
                { km: 18, alt: 40, name: 'O Porriño', stage: 'E1' },
                { km: 34, alt: 15, name: 'Redondela', stage: 'E2' },
                { km: 53.6, alt: 20, name: 'Pontevedra', stage: 'E3' },
                { km: 75.6, alt: 280, name: 'Armenteira', stage: 'E4' },
                { km: 102.6, alt: 5, name: 'Vilanova', stage: 'E5' },
                { km: 129.6, alt: 10, name: 'Padrón', stage: 'E6' },
                { km: 154.1, alt: 260, name: 'Santiago', stage: 'E7' },
            ];

            const stages = [
                { 
                    id: 1, title: "Etapa 1: Tui - O Porriño", 
                    expertDesc: "Como peregrinos expertos, sabemos que o inicio en Tui é máxico pero enganoso. Cruzamos a ponte internacional deixando atrás Portugal. É un trazado amable para espertar os sentidos, con bosques de ribeira que nos regalan a sombra do río Louro.",
                    difficulty: "Fácil",
                    tips: ["Toma a variante do Río Louro; evitarás 8km de asfalto pesado no polígono industrial.", "Non forces o ritmo; hoxe trátase de axustar a mochila e escoitar o teu corpo."],
                    kmTotal: 18
                },
                { 
                    id: 2, title: "Etapa 2: O Porriño - Redondela", 
                    expertDesc: "O Camiño empeza a amosar os seus montes. O ascenso ao Monte Lombo da Maceira regálanos a primeira gran vista da Ría de Vigo. É unha etapa de transición curta pero intensa que remata baixo os famosos viadutos.",
                    difficulty: "Media",
                    tips: ["Dosifica enerxía na subida de Enseada. É curta, pero a súa inclinación esixe respecto.", "En Redondela, busca a unión do Camiño da Costa co Central; a enerxía cambia."],
                },
                { 
                    id: 3, title: "Etapa 3: Redondela - Pontevedra", 
                    expertDesc: "Atravesamos a historia en Ponte Sampaio. As antigas 'corredoiras' galegas envólvennos en misticismo. Entrar na Pontevedra señorial é unha recompensa ao esforzo do día.",
                    difficulty: "Media",
                    tips: ["Cruzar a Ponte Sampaio require unha foto; é onde derrotamos ás tropas de Napoleón.", "Reserva tempo para visitar a Igrexa da Peregrina, coa súa planta en forma de cuncha."],
                },
                { 
                    id: 4, title: "Etapa 4: Pontevedra - Armenteira", 
                    expertDesc: "O gran fito da Variante Espiritual. Deixamos o fluxo masivo para ascender ao Mosteiro de Armenteira. É un retiro espiritual en movemento onde o silencio do bosque é o teu único compañeiro.",
                    difficulty: "Difícil",
                    tips: ["É o ascenso máis técnico (270m). Faino con calma, o premio é a paz do mosteiro.", "Asegúrate de levar auga abondo ao saír de Poio; a montaña non perdoa esquecementos."],
                },
                { 
                    id: 5, title: "Etapa 5: Armenteira - Vilanova", 
                    expertDesc: "A 'Ruta da Pedra e da Auga' é, ao noso xuízo, un dos tramos máis fermosos do mundo. Camiñarás xunto a 33 muíños antigos e o susurro constante das fervenzas.",
                    difficulty: "Media-Fácil",
                    tips: ["Os bastóns son os teus mellores aliados aquí pola humidade das pedras.", "Ao chegar a Vilanova, camiña descalzo pola area da praia; é a mellor medicina."],
                },
                { 
                    id: 6, title: "Etapa 6: Vilanova - Padrón", 
                    expertDesc: "A Traslatio: a orixe de todo. Navegar o río Ulla seguindo o camiño dos restos do Apóstolo é un descanso necesario e unha experiencia espiritual única.",
                    difficulty: "Moi Fácil",
                    tips: ["O barco depende das mareas. Confirma o horario co patrón o día anterior.", "Leva algo de abrigo para o traxecto en lancha; a brisa do río é constante."],
                },
                { 
                    id: 7, title: "Etapa 7: Padrón - Santiago", 
                    expertDesc: "A culminación. Tras deixar Padrón, o ascenso a Milladoiro é o último gardián antes de ver as torres da Catedral. A emoción no Obradoiro é o selo final.",
                    difficulty: "Media",
                    tips: ["Saia ao amencer. Chegar a Santiago cedo permíteche vivir a chegada con máis serenidade.", "Non busques o final, goza cada quilómetro desta última xornada."],
                }
            ];

            const currentStageInfo = stages[activeStage];

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        
                        {/* Header con Logo Camiñando Xuntos */}
                        <header className="mb-10 flex flex-col items-center text-center gap-6 border-b border-amber-100 pb-8">
                            <div className="relative group flex flex-col items-center">
                                <svg width="220" height="120" viewBox="0 0 400 200" className="drop-shadow-xl transform hover:scale-105 transition-transform">
                                    <path d="M100 100 L20 100 L180 20 L380 100 L340 100 L380 180 L180 180 Z" fill="#FACC15" stroke="#1E3A8A" strokeWidth="8" />
                                    <text x="50%" y="115" textAnchor="middle" fill="#1E3A8A" style={{fontSize: '26px', fontWeight: '900', fontFamily: 'Inter'}}>CAMIÑANDO XUNTOS</text>
                                </svg>
                            </div>
                            
                            <div className="flex flex-col gap-4 items-center mt-2">
                                <button 
                                    onClick={handleShare}
                                    className="flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-all shadow-md active:scale-95"
                                >
                                    <Share2 size={16} />
                                    {copied ? '¡Ligazón Copiada!' : 'Compartir Perfil'}
                                </button>
                            </div>
                        </header>

                        {/* Notas de Distancia */}
                        <div className="flex flex-wrap justify-center gap-6 mb-8">
                            <div className="bg-white px-8 py-4 rounded-3xl shadow-sm border border-stone-100 text-center">
                                <p className="text-[10px] uppercase font-black text-stone-400 tracking-tighter mb-1">Distancia Total Itinerario</p>
                                <p className="text-3xl font-black text-blue-900">154.1 KM</p>
                            </div>
                            <div className="bg-white px-8 py-4 rounded-3xl shadow-sm border border-stone-100 text-center">
                                <p className="text-[10px] uppercase font-black text-stone-400 tracking-tighter mb-1">Distancia Só Camiñar</p>
                                <p className="text-3xl font-black text-amber-600">~127.1 KM</p>
                            </div>
                        </div>

                        {/* Gráfico de Altitude */}
                        <div className="bg-white rounded-[2.5rem] shadow-2xl border border-stone-50 p-8 mb-10 overflow-hidden">
                            <h2 className="text-xl font-black text-blue-900 uppercase tracking-widest mb-8 flex items-center gap-3">
                                <Mountain className="text-amber-500" /> Orografía do Camiño Portugués Espiritual
                            </h2>
                            
                            <div className="h-[350px] w-full">
                                <ResponsiveContainer width="100%" height="100%">
                                    <AreaChart data={data} margin={{ top: 20, right: 30, left: 0, bottom: 20 }}>
                                        <defs>
                                            <linearGradient id="colorAlt" x1="0" y1="0" x2="0" y2="1">
                                                <stop offset="5%" stopColor="#d97706" stopOpacity={0.2}/>
                                                <stop offset="95%" stopColor="#d97706" stopOpacity={0}/>
                                            </linearGradient>
                                        </defs>
                                        <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f5f5f5" />
                                        <XAxis dataKey="km" tick={{fontSize: 10, fontWeight: 'bold'}} />
                                        <YAxis tick={{fontSize: 10}} unit="m" />
                                        <Tooltip 
                                            contentStyle={{borderRadius: '20px', border: 'none', boxShadow: '0 20px 25px -5px rgba(0,0,0,0.1)'}}
                                        />
                                        <Area type="monotone" dataKey="alt" stroke="#d97706" strokeWidth={5} fill="url(#colorAlt)" />
                                        
                                        <ReferenceLine x={0} stroke="#cbd5e1"><Label value="Tui" position="top" fontSize={10} /></ReferenceLine>
                                        <ReferenceLine x={53.6} stroke="#f59e0b" strokeWidth={2} strokeDasharray="5 5"><Label value="V. Espiritual" position="top" fill="#d97706" fontSize={10} fontWeight="bold" /></ReferenceLine>
                                        <ReferenceLine x={102.6} stroke="#2563eb" strokeWidth={2} strokeDasharray="3 3"><Label value="Traslatio" position="top" fill="#2563eb" fontSize={10} /></ReferenceLine>
                                        <ReferenceLine x={154.1} stroke="#1e3a8a"><Label value="Santiago" position="top" fontSize={10} /></ReferenceLine>
                                    </AreaChart>
                                </ResponsiveContainer>
                            </div>
                        </div>

                        {/* Detalle de Etapa */}
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                            <div className="lg:col-span-4 space-y-3">
                                <h3 className="text-xs font-black text-blue-900 uppercase tracking-widest mb-4 pl-4">Etapas do Camiño</h3>
                                {stages.map((stage, index) => (
                                    <button
                                        key={stage.id}
                                        onClick={() => setActiveStage(index)}
                                        className={`w-full text-left p-5 rounded-3xl transition-all flex items-center justify-between group ${
                                            activeStage === index 
                                                ? 'bg-blue-900 text-white shadow-xl -translate-y-1' 
                                                : 'bg-white border border-stone-100 text-stone-500 hover:border-amber-300 hover:bg-amber-50'
                                        }`}
                                    >
                                        <div className="flex items-center gap-4">
                                            <span className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-black ${
                                                activeStage === index ? 'bg-amber-400 text-blue-900' : 'bg-stone-100'
                                            }`}>
                                                {stage.id}
                                            </span>
                                            <span className="text-sm font-bold">{stage.title.split(': ')[1]}</span>
                                        </div>
                                        <ChevronRight size={16} className={activeStage === index ? 'text-amber-400' : 'text-stone-300'} />
                                    </button>
                                ))}
                            </div>

                            <div className="lg:col-span-8 bg-white rounded-[2.5rem] shadow-xl border border-stone-50 overflow-hidden">
                                <div className="bg-gradient-to-br from-blue-900 to-blue-800 p-10 text-white">
                                    <div className="flex justify-between items-start mb-6">
                                        <h3 className="text-3xl font-serif font-bold leading-tight">{currentStageInfo.title}</h3>
                                        <span className={`px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${
                                            currentStageInfo.difficulty === 'Difícil' ? 'bg-red-500' :
                                            currentStageInfo.difficulty === 'Media' ? 'bg-amber-500' : 'bg-emerald-500'
                                        }`}>
                                            Nivel: {currentStageInfo.difficulty}
                                        </span>
                                    </div>
                                    <p className="text-blue-100/90 leading-relaxed font-light text-xl italic">
                                        "{currentStageInfo.expertDesc}"
                                    </p>
                                </div>
                                
                                <div className="p-10">
                                    <h4 className="flex items-center gap-3 font-black text-blue-900 uppercase tracking-widest text-xs mb-8">
                                        <Info className="text-amber-500" size={20} /> Consello do Peregrino Experto
                                    </h4>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                                        <ul className="space-y-6">
                                            {currentStageInfo.tips.map((tip, i) => (
                                                <li key={i} className="flex gap-4 text-stone-600 text-base leading-relaxed">
                                                    <span className="text-amber-500 font-black">✔</span>
                                                    {tip}
                                                </li>
                                            ))}
                                        </ul>
                                        <div className="bg-stone-50 p-8 rounded-[2rem] border border-stone-100">
                                            <p className="text-[10px] font-black text-stone-400 uppercase tracking-widest mb-4">Análise de Esforzo</p>
                                            <p className="text-stone-600 text-sm italic text-balance">
                                                {activeStage === 3 ? "Este é o día de maior demanda cardiovascular. Mantén unha respiración rítmica e non te deteñas en plena costa." : 
                                                 activeStage === 6 ? "A fatiga acumulada é real. Estira ben ao chegar a Padrón; Santiago agárdate mañá." :
                                                 "Etapa para gozar da paisaxe sen grandes sobresaltos físicos."}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Loxística Final */}
                        <div className="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div className="bg-white p-10 rounded-[2.5rem] shadow-md border border-stone-50 flex gap-6 items-start">
                                <div className="bg-blue-50 p-5 rounded-3xl"><Bed className="text-blue-600" size={32} /></div>
                                <div>
                                    <h4 className="text-blue-900 font-black uppercase tracking-widest text-sm mb-3">Hospedaxes</h4>
                                    <p className="text-stone-500 text-sm leading-relaxed">
                                        Setembro é tempada alta. Reserva os teus **hospedaxes** con antelación, especialmente en Armenteira e Vilanova de Arousa.
                                    </p>
                                </div>
                            </div>
                            <div className="bg-white p-10 rounded-[2.5rem] shadow-md border border-stone-50 flex gap-6 items-start">
                                <div className="bg-amber-50 p-5 rounded-3xl"><Award className="text-amber-600" size={32} /></div>
                                <div>
                                    <h4 className="text-amber-900 font-black uppercase tracking-widest text-sm mb-3">Credencial</h4>
                                    <p className="text-stone-500 text-sm leading-relaxed">
                                        Non esquezas selar a túa credencial. Na Variante Espiritual, o selo do barco na Traslatio é fundamental para a túa Compostela.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <footer className="mt-24 py-16 text-center border-t border-stone-100">
                            <p className="text-3xl font-serif font-bold text-blue-900 italic mb-6">
                                "Imos Camiñando Xuntos a Santiago de Compostela, Bo Camiño"
                            </p>
                            <div className="flex justify-center gap-8 text-stone-300 font-black uppercase tracking-[0.3em] text-[10px]">
                                <span>Tui</span>
                                <span>•</span>
                                <span>Variante Espiritual</span>
                                <span>•</span>
                                <span>Santiago</span>
                            </div>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
